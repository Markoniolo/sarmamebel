{"version":3,"sources":["scripts/modal-recovery.js"],"names":["modalRecovery","document","querySelector","modalRecoveryInit","links","querySelectorAll","navBtns","phoneSpan","emailSpan","emailInput","phoneInput","submit","changeLogin","codeInputs","addEventListener","nextStep","once","i","length","prevStep","closeModalRecovery","toggleNavBtn","classList","add","innerHTML","value","focus","validateCode","removeEventListener","doneStep","remove","resetValidateCode","contains","oldActive","getAttribute","closeBtn","click","nextInput","disabled","input","substring","replace","blur","checkCode","isValid"],"mappings":"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","sourcesContent":["const modalRecovery = document.querySelector('.modal-recovery')\r\n\r\nif (modalRecovery) modalRecoveryInit()\r\n\r\nfunction modalRecoveryInit () {\r\n    const links = modalRecovery.querySelectorAll('.modal-recovery__link')\r\n    const navBtns = modalRecovery.querySelectorAll('.modal-recovery__nav-btn')\r\n    const phoneSpan = modalRecovery.querySelector('.modal-recovery__text-value-phone')\r\n    const emailSpan = modalRecovery.querySelector('.modal-recovery__text-value-email')\r\n    const emailInput = modalRecovery.querySelector('.modal-recovery__input_email')\r\n    const phoneInput = modalRecovery.querySelector('.modal-recovery__input_phone')\r\n    const submit = modalRecovery.querySelector('.modal-recovery__submit')\r\n    const changeLogin = modalRecovery.querySelectorAll('.modal-recovery__change-login')\r\n    const codeInputs = modalRecovery.querySelectorAll('.modal-recovery__code-input')\r\n\r\n    submit.addEventListener('click', nextStep, {once: true})\r\n\r\n    for (let i = 0; i < changeLogin.length; i++) {\r\n        changeLogin[i].addEventListener('click', prevStep)\r\n    }\r\n\r\n    for (let i = 0; i < links.length; i++) {\r\n        links[i].addEventListener('click', closeModalRecovery)\r\n    }\r\n\r\n    for (let i = 0; i < navBtns.length; i++) {\r\n        navBtns[i].addEventListener('click', toggleNavBtn)\r\n    }\r\n\r\n    function nextStep () {\r\n        modalRecovery.classList.add('modal-recovery_active')\r\n        phoneSpan.innerHTML = phoneInput.value\r\n        emailSpan.innerHTML = emailInput.value\r\n        codeInputs[0].focus()\r\n        validateCode()\r\n        submit.removeEventListener('click', nextStep, {once: true})\r\n        submit.addEventListener('click', doneStep, {once: true})\r\n        submit.innerHTML = 'Восстановить'\r\n    }\r\n\r\n    function prevStep () {\r\n        submit.innerHTML = 'Продолжить'\r\n        modalRecovery.classList.remove('modal-recovery_active')\r\n        phoneSpan.innerHTML = phoneInput.value\r\n        emailSpan.innerHTML = emailInput.value\r\n        resetValidateCode()\r\n        submit.addEventListener('click', nextStep, {once: true})\r\n        submit.removeEventListener('click', doneStep, {once: true})\r\n    }\r\n\r\n    function doneStep () {\r\n        modalRecovery.classList.add('modal-recovery_done')\r\n    }\r\n\r\n    function toggleNavBtn () {\r\n        if (this.classList.contains('modal-recovery__nav-btn_active')) return\r\n        const oldActive = modalRecovery.querySelector('.modal-recovery__nav-btn_active')\r\n        oldActive.classList.remove('modal-recovery__nav-btn_active')\r\n        this.classList.add('modal-recovery__nav-btn_active')\r\n        const value = this.getAttribute('data-value')\r\n        if (value === 'email') {\r\n            modalRecovery.classList.add('modal-recovery_email')\r\n            modalRecovery.classList.remove('modal-recovery_phone')\r\n        } else if (value === 'phone') {\r\n            modalRecovery.classList.remove('modal-recovery_email')\r\n            modalRecovery.classList.add('modal-recovery_phone')\r\n        }\r\n    }\r\n\r\n    function closeModalRecovery () {\r\n        const closeBtn = modalRecovery.querySelector('.f-button.is-close-btn')\r\n        closeBtn.click()\r\n    }\r\n\r\n    function resetValidateCode () {\r\n        for (let i = 0; i < codeInputs.length; i++) {\r\n            codeInputs[i].removeEventListener('input', () => nextInput(codeInputs[i],i+1))\r\n            codeInputs[i].value = ''\r\n        }\r\n        submit.disabled = false\r\n    }\r\n\r\n    function validateCode () {\r\n        submit.disabled = true\r\n        for (let i = 0; i < codeInputs.length; i++) {\r\n            codeInputs[i].addEventListener('input', () => nextInput(codeInputs[i],i+1))\r\n        }\r\n    }\r\n\r\n    function nextInput (input, i) {\r\n        input.value = input.value.substring(0, 1)\r\n        input.value = input.value.replace(/[^0-9]/g,'');\r\n        if (codeInputs[i]) {\r\n            codeInputs[i].focus()\r\n        } else {\r\n            codeInputs[i-1].blur()\r\n        }\r\n        checkCode()\r\n    }\r\n\r\n    function checkCode () {\r\n        let isValid = true\r\n        for (let i = 0; i < codeInputs.length; i++) {\r\n            if (!codeInputs[i].value) isValid = false\r\n        }\r\n        submit.disabled = !isValid\r\n    }\r\n}\r\n"],"file":"modal-recovery.js"}